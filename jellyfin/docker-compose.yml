version: "3.5"

services:
  app:
    image: linuxserver/jellyfin:amd64-10.8.1
    container_name: jellyfin-server
    # user: ${JELLYFIN_UID}:${JELLYFIN_GID}
    restart: unless-stopped
    network_mode: host
    ports:
      - 8096:8096
      - 8920:8920
      - 7359:7359/udp
      - 1900:1900/udp
    volumes:
      - ${JELLYFIN_BASE_DIRECTORY}/config:/config
      - ${JELLYFIN_BASE_DIRECTORY}/cache:/cache
      - ${JELLYFIN_BASE_DIRECTORY}/logs:/log
      - ${JELLYFIN_BASE_DIRECTORY}/data:/data
      - ${JELLYFIN_MEDIA_DIRECTORY}:/media
      # - ${JELLYFIN_MEDIA_DIRECTORY}/media2:/media2:ro
    environment:
      - TZ=${JELLYFIN_TIMEZONE}
      - JELLYFIN_PublishedServerUrl=${JELLYFIN_SERVER_URL}
      - JELLYFIN_CACHE_DIR=/cache
      - JELLYFIN_CONFIG_DIR=/config
      - JELLYFIN_DATA_DIR=/data
      - JELLYFIN_LOG_DIR=/log